<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>What the Package Does (One Line, Title Case) • triangulate</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="What the Package Does (One Line, Title Case)">
<meta property="og:description" content="What the package does (one paragraph).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">triangulate</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Creating-triangulation-datasets.html">Creating triangulation datasets</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mcguinlu/triangulate/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="triangulate">triangulate<a class="anchor" aria-label="anchor" href="#triangulate"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of triangulate is to create a generalised version of the bias-adjusted meta-analysis approach originally proposed by Turner et al. </p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"mcguinlutriangulate"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="️-warning-notes">
<span class="emoji" data-emoji="warning">⚠️</span> WARNING NOTES<a class="anchor" aria-label="anchor" href="#%EF%B8%8F-warning-notes"></a>
</h2>
<hr>
<blockquote>
<p><em>WARNING #1:</em> This package is under development, and as such the API is subject to change at any point without warning.</p>
</blockquote>
<hr>
<blockquote>
<p><em>WARNING #2:</em> The approach described requires work in the preparation of data to work with the package. Please be sure to read the documentation and make use of helper functions to check whether your data is set-up right.</p>
</blockquote>
<hr>
<blockquote>
<p><em>WARNING #3:</em> The approach described requires careful choice of valid prior distributions of bias/indirectness.</p>
</blockquote>
<hr>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="section level3">
<h3 id="datasets">Datasets<a class="anchor" aria-label="anchor" href="#datasets"></a>
</h3>
<p>The approach described</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load libraries</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span>
<span class="co">#&gt; Warning: package 'magrittr' was built under R version 3.6.3</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mcguinlu.github.io/triangulate">triangulate</a></span><span class="op">)</span>

<span class="co"># See column names of dat_bias</span>

<span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dat_bias</span><span class="op">)</span>
<span class="co">#&gt;  [1] "result_id" "study"     "type"      "yi"        "vi"        "d1j"      </span>
<span class="co">#&gt;  [7] "d2j"       "d3j"       "d4j"       "d5j"       "d6j"       "d7j"      </span>
<span class="co">#&gt; [13] "d1t"       "d2t"       "d3t"       "d4t"       "d5t"       "d6t"      </span>
<span class="co">#&gt; [19] "d7t"       "d1d"       "d2d"       "d3d"       "d4d"       "d5d"      </span>
<span class="co">#&gt; [25] "d6d"       "d7d"</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat_bias</span><span class="op">)</span>
<span class="co">#&gt;   result_id   study type          yi         vi      d1j      d2j      d3j d4j</span>
<span class="co">#&gt; 1   13401-2 Study 1 NRSI -0.12783337 0.12506586     High      Low Moderate Low</span>
<span class="co">#&gt; 2   14632-2 Study 2 NRSI -0.19845094 0.08680919 Moderate Moderate      Low Low</span>
<span class="co">#&gt; 3   14658-2 Study 3 NRSI -0.18632958 0.03361240     High     High      Low Low</span>
<span class="co">#&gt; 4   14665-6 Study 4 NRSI  0.19062036 0.05526578     High Moderate      Low Low</span>
<span class="co">#&gt; 5   14720-1 Study 5 NRSI -0.56211892 0.05141924     High      Low      Low Low</span>
<span class="co">#&gt; 6   14761-1 Study 6 NRSI -0.09431068 0.06969822     High Moderate      Low Low</span>
<span class="co">#&gt;        d5j      d6j      d7j d1t  d2t  d3t  d4t  d5t  d6t  d7t</span>
<span class="co">#&gt; 1      Low      Low Moderate Add None Prop None None None Prop</span>
<span class="co">#&gt; 2      Low Moderate Moderate Add  Add None None None  Add Prop</span>
<span class="co">#&gt; 3      Low Moderate Moderate Add  Add None None None  Add Prop</span>
<span class="co">#&gt; 4      Low      Low Moderate Add  Add None None None None Prop</span>
<span class="co">#&gt; 5 Moderate      Low Moderate Add None None None Prop None Prop</span>
<span class="co">#&gt; 6 Moderate      Low Moderate Add  Add None None Prop None Prop</span>
<span class="co">#&gt;                    d1d                d2d           d3d  d4d           d5d</span>
<span class="co">#&gt; 1   Favours comparator               None Unpredictable None          None</span>
<span class="co">#&gt; 2 Favours experimental Favours comparator          None None          None</span>
<span class="co">#&gt; 3   Favours comparator Favours comparator          None None          None</span>
<span class="co">#&gt; 4   Favours comparator      Unpredictable          None None          None</span>
<span class="co">#&gt; 5   Favours comparator               None          None None Unpredictable</span>
<span class="co">#&gt; 6   Favours comparator Favours comparator          None None Unpredictable</span>
<span class="co">#&gt;             d6d            d7d</span>
<span class="co">#&gt; 1          None Away from null</span>
<span class="co">#&gt; 2 Unpredictable Away from null</span>
<span class="co">#&gt; 3 Unpredictable Away from null</span>
<span class="co">#&gt; 4          None Away from null</span>
<span class="co">#&gt; 5          None Away from null</span>
<span class="co">#&gt; 6          None Away from null</span>

<span class="fu"><a href="reference/tri_dat_check.html">tri_dat_check</a></span><span class="op">(</span><span class="va">dat_bias</span><span class="op">)</span>
<span class="co">#&gt; Looks good!</span>
<span class="co">#&gt; All expected columns are present in the dataset.</span></code></pre></div>
<p>For details</p>
</div>
<div class="section level3">
<h3 id="absolute-directions-of-bias">Absolute directions of bias<a class="anchor" aria-label="anchor" href="#absolute-directions-of-bias"></a>
</h3>
<p>The best way to think about this is to consider an example, plotted on a standard forest plot.</p>
<p>For <em>additive</em> bias/indirectness, the position of the point estimate does not effect the absolute direction of bias. That is, regardless of whether the point estimate is above or below the null, the absolute direction of bias/indirectness will be the same.</p>
<p>In contrast, for <em>proportional bias/indirectness</em>, the absolute direction of bias depends on the position of the effect estimate. For example, if the effect estimate represents a protective effect (below the null), then bias towards the null would be adjusted for by moving the effect estimate proportionally to the right. In contrast, if the effect of the intervention is harmful (effect estimate above the null), bias towards the null would be adjusted for by moving the effect estimate proportionally to the left.</p>
<p>Both scenarios are illustrated in the figure below:</p>
<p><img src="reference/figures/exampleDirection.png"></p>
<p>Once we load our data, helper functions will convert it to <em>long</em> format and convert to absolute directions of bias/indirectness.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat_bias</span> <span class="op">&lt;-</span> <span class="fu">triangulate</span><span class="fu">::</span><span class="va"><a href="reference/dat_bias.html">dat_bias</a></span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>

<span class="co"># Convert to long format</span>
<span class="fu"><a href="reference/tri_to_long.html">tri_to_long</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  
<span class="fu"><a href="reference/tri_absolute_direction.html">tri_absolute_direction</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>

<span class="fu"><a href="reference/tri_append_bias.html">tri_append_bias</a></span><span class="op">(</span><span class="fu">triangulate</span><span class="fu">::</span><span class="va"><a href="reference/dat_bias_values.html">dat_bias_values</a></span><span class="op">)</span></code></pre></div>
<p>Then apply the same approach to the indirectness dataset:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat_ind</span> <span class="op">&lt;-</span> <span class="fu">triangulate</span><span class="fu">::</span><span class="va"><a href="reference/dat_ind.html">dat_ind</a></span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>

<span class="co"># Convert to long format</span>
<span class="fu"><a href="reference/tri_to_long.html">tri_to_long</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  
<span class="fu"><a href="reference/tri_absolute_direction.html">tri_absolute_direction</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  
<span class="fu"><a href="reference/tri_append_indirect.html">tri_append_indirect</a></span><span class="op">(</span><span class="fu">triangulate</span><span class="fu">::</span><span class="va"><a href="reference/dat_ind_values.html">dat_ind_values</a></span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="add-prior-distributions-of-biasindirectness">Add prior distributions of bias/indirectness<a class="anchor" aria-label="anchor" href="#add-prior-distributions-of-biasindirectness"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat_bias_values</span>
<span class="co">#&gt;   domain        j bias_m_add bias_v_add bias_m_prop bias_v_prop</span>
<span class="co">#&gt; 1    all     high       0.18       0.10        0.06       0.032</span>
<span class="co">#&gt; 2    all moderate       0.09       0.05        0.03       0.016</span>
<span class="co">#&gt; 3    all      low       0.00       0.00        0.00       0.000</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="create-final-dataset-and-analyse">Create final dataset and analyse<a class="anchor" aria-label="anchor" href="#create-final-dataset-and-analyse"></a>
</h2>
<p>We now have two clean datasets, one for bias and one for indirectness, that we can use to</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat_final</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/tri_prep_data.html">tri_prep_data</a></span><span class="op">(</span><span class="va">dat_bias</span>, <span class="va">dat_ind</span><span class="op">)</span>
<span class="co">#&gt; Joining, by = "result_id"</span>
<span class="co">#&gt; Joining, by = "result_id"</span>
<span class="co">#&gt; Joining, by = "result_id"</span>
<span class="co">#&gt; Joining, by = "result_id"</span></code></pre></div>
<p>At this point, we have an unadjusted (<em>yi</em>, <em>vi</em>) and adjusted (<em>yi_adj</em>, <em>vi_adj</em>) estimates for each result.</p>
<p>These estimates can then simply be passed to <code>metafor</code> for analysis</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">model_adj</span> <span class="op">&lt;-</span> <span class="fu">metafor</span><span class="fu">::</span><span class="fu"><a href="https://wviechtb.github.io/metafor/reference/rma.uni.html" class="external-link">rma.uni</a></span><span class="op">(</span>
  yi <span class="op">=</span> <span class="va">yi_adj</span>,
  vi <span class="op">=</span> <span class="va">vi_adj</span>,
  data <span class="op">=</span> <span class="va">dat_final</span>,
  slab <span class="op">=</span> <span class="va">dat_final</span><span class="op">$</span><span class="va">study</span>,
<span class="op">)</span>
<span class="co">#&gt; Warning: Studies with NAs omitted from model fitting.</span>

<span class="co"># Pass model to forest plot function</span>
<span class="fu">metafor</span><span class="fu">::</span><span class="fu"><a href="https://wviechtb.github.io/metafor/reference/forest.html" class="external-link">forest</a></span><span class="op">(</span>
  <span class="va">model_adj</span>,
  atransf <span class="op">=</span> <span class="va">exp</span>,
<span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-8-1.png" width="100%" height="400"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mcguinlu/triangulate/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mcguinlu/triangulate/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing triangulate</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Luke McGuinness <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8730-9761" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://github.com/mcguinlu/triangulate/actions" class="external-link"><img src="https://github.com/mcguinlu/triangulate/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Luke McGuinness.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
